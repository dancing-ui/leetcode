[原题链接](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/description/)
# 状态定义
这里的卖出就是指交易次数
- f[i][j][0]表示前i天，卖出j次，且第i天**未持有股票**的最大收益
- f[i][j][1]表示前i天，卖出j次，且第i天**持有股票**的最大收益
# 初始状态设置
股票价格下标从0开始
- f[0][0][0] = 0：既不卖出，也不持有股票，所以最大收益就是0
- f[0][0][1] = -prices[0]：第1天，卖出0次，且持有股票，那么就需要花钱来买，花钱的价格就是prices[0]
- f[0][1~k][0] = -inf：第1天，卖出k次，且未持有股票。由于是第1天，不可能卖出，所以是无效状态，初始化为负无穷
- f[0][1~k][1] = -inf：第1天，卖出k次，且持有股票。由于是第1天，不可能卖出，所以是无效状态，初始化为负无穷
# 状态转移
- f[i][0][0] = 0：既不卖出，也不持有股票，所以最大收益就是0
- f[i][0][1] = max(f[i-1][0][1], f[i-1][0][0] -prices[i])
  - 第i天，卖出0次，且持有股票，可能是第i-1天本来就持有股票
  - 也可能是第i-1天未持有股票，第i天买入，收益就是 -prices[i]
- f[i][j][0] = max(f[i-1][j][0], f[i][j-1][1] + prices[i])
  - 这里j=1~k
  - 第i天，卖出j次，且未持有股票，可能是第i-1天卖出j次，且未持有股票
  - 也可能是第i天，卖出j-1次，且持有股票，那么收益就是 +prices[i]
- f[i][j][1] = max(f[i-1][j][1], f[i][j][0] - prices[i])
  - 这里j=1~k
  - 第i天，卖出j次，且持有股票，可能是第i-1天卖出j次，且持有股票
  - 也可能是第i天，卖出j次，且未持有股票，那么第i天就要买入股票，收益就是 -prices[i]
# 统计答案
- max(0, f[n-1][k][0])
  - 当n=1，k大于0时，f[0][k][0]=-inf，为无效状态，此时的最大收益应该是0
  - 到最后一天的时候，肯定是卖出k次，且未持有股票的收益最大